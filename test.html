<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ProSocket æµ‹è¯•é¡µé¢</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }

        h1 {
            color: #333;
        }

        .section {
            margin: 20px 0;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
        }

        .link-button {
            display: inline-block;
            padding: 10px 20px;
            background-color: #409eff;
            color: white;
            text-decoration: none;
            border-radius: 4px;
            margin: 5px;
        }

        .link-button:hover {
            background-color: #66b1ff;
        }

        .code-block {
            background-color: #f5f5f5;
            padding: 10px;
            border-radius: 4px;
            font-family: monospace;
            overflow-x: auto;
        }

        .status {
            padding: 5px 10px;
            border-radius: 4px;
            display: inline-block;
            margin: 5px 0;
        }

        .status.success {
            background-color: #f0f9ff;
            color: #67c23a;
        }

        .status.info {
            background-color: #f4f4f5;
            color: #909399;
        }
    </style>
</head>

<body>
<h1>ProSocket WebSocket Protobuf è°ƒè¯•å·¥å…·</h1>

<div class="section">
    <h2>ğŸš€ å¿«é€Ÿè®¿é—®</h2>
    <a href="http://localhost:8080" class="link-button" target="_blank">è®¿é—®ä¸»é¡µ</a>
    <a href="http://localhost:8080/#/prosocket" class="link-button" target="_blank">æ‰“å¼€ProSocketå·¥å…·</a>
</div>

<div class="section">
    <h2>ğŸ“‹ ä½¿ç”¨æ­¥éª¤</h2>
    <ol>
        <li>
            <strong>å¯åŠ¨æµ‹è¯•æœåŠ¡å™¨</strong>ï¼ˆå¯é€‰ï¼‰
            <div class="code-block">node test-server.js</div>
            <div class="status info">æµ‹è¯•æœåŠ¡å™¨å°†è¿è¡Œåœ¨ ws://localhost:8081</div>
        </li>
        <li>
            <strong>è®¿é—®ProSocketå·¥å…·</strong>
            <div>ç‚¹å‡»ä¸Šæ–¹"æ‰“å¼€ProSocketå·¥å…·"æŒ‰é’®</div>
        </li>
        <li>
            <strong>å»ºç«‹WebSocketè¿æ¥</strong>
            <div>åœ¨é¡¶éƒ¨è¾“å…¥æ¡†ä¸­è¾“å…¥ <code>localhost:8081</code>ï¼Œç‚¹å‡»"è¿æ¥"</div>
        </li>
        <li>
            <strong>å¯¼å…¥Protoæ–‡ä»¶</strong>
            <div>ç‚¹å‡»å·¦ä¾§"å¯¼å…¥Proto"æŒ‰é’®ï¼Œé€‰æ‹© <code>public/example.proto</code></div>
        </li>
        <li>
            <strong>å‘é€æµ‹è¯•æ¶ˆæ¯</strong>
            <div>åœ¨æ¶ˆæ¯ç¼–è¾‘å™¨ä¸­ï¼š</div>
            <ul>
                <li>ç‚¹å‡»åˆ·æ–°æŒ‰é’®ï¼ˆâŸ³ï¼‰åˆ·æ–°æ¶ˆæ¯ç±»å‹åˆ—è¡¨</li>
                <li>ä»ä¸‹æ‹‰æ¡†é€‰æ‹©æ¶ˆæ¯ç±»å‹ï¼ˆå¦‚ example.LoginRequestï¼‰</li>
                <li>å¡«å†™å­—æ®µå€¼</li>
                <li>ç‚¹å‡»"å‘é€æ¶ˆæ¯"</li>
            </ul>
        </li>
    </ol>
</div>

<div class="section">
    <h2>ğŸ§ª æµ‹è¯•ç”¨ä¾‹</h2>
    <h3>1. LoginRequest ç¤ºä¾‹</h3>
    <div class="code-block">
        {
        "username": "testuser",
        "password": "123456",
        "remember_me": true
        }
    </div>

    <h3>2. ChatMessage ç¤ºä¾‹</h3>
    <div class="code-block">
        {
        "id": 1001,
        "sender_id": 123,
        "receiver_id": 456,
        "content": "Hello, ProSocket!",
        "type": "TEXT",
        "timestamp": 1639500000000,
        "is_read": false,
        "attachments": []
        }
    </div>

    <h3>3. Heartbeat ç¤ºä¾‹</h3>
    <div class="code-block">
        {
        "timestamp": 1639500000000,
        "client_id": "client-001"
        }
    </div>
</div>

<div class="section">
    <h2>â— å¸¸è§é—®é¢˜</h2>
    <dl>
        <dt><strong>Q: å¯¼å…¥Protoæ–‡ä»¶åï¼Œæ¶ˆæ¯ç±»å‹ä¸‹æ‹‰æ¡†ä¸ºç©ºï¼Ÿ</strong></dt>
        <dd>A: ç‚¹å‡»æ¶ˆæ¯ç¼–è¾‘å™¨å³ä¸Šè§’çš„åˆ·æ–°æŒ‰é’®ï¼ˆâŸ³ï¼‰æ‰‹åŠ¨åˆ·æ–°æ¶ˆæ¯ç±»å‹åˆ—è¡¨ã€‚</dd>

        <dt><strong>Q: WebSocketè¿æ¥å¤±è´¥ï¼Ÿ</strong></dt>
        <dd>A: ç¡®ä¿æµ‹è¯•æœåŠ¡å™¨å·²å¯åŠ¨ï¼ˆè¿è¡Œ <code>node test-server.js</code>ï¼‰ï¼Œæˆ–æ£€æŸ¥ç›®æ ‡æœåŠ¡å™¨åœ°å€æ˜¯å¦æ­£ç¡®ã€‚</dd>

        <dt><strong>Q: æ¶ˆæ¯å‘é€å¤±è´¥ï¼Ÿ</strong></dt>
        <dd>A: æ£€æŸ¥WebSocketè¿æ¥çŠ¶æ€ï¼Œç¡®ä¿å·²è¿æ¥ã€‚æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯ä¿¡æ¯ã€‚</dd>
    </dl>
</div>

<div class="section">
    <h2>ğŸ“Š çŠ¶æ€æ£€æŸ¥</h2>
    <div>
        <div class="status success" id="app-status">æ£€æŸ¥åº”ç”¨çŠ¶æ€...</div>
    </div>
    <div style="margin-top: 10px;">
        <button onclick="checkStatus()">åˆ·æ–°çŠ¶æ€</button>
    </div>
</div>

<script>
    function checkStatus() {
        const statusEl = document.getElementById('app-status');

        // æ£€æŸ¥ä¸»åº”ç”¨
        fetch('http://localhost:8080')
            .then(response => {
                if (response.ok) {
                    statusEl.textContent = 'âœ… ProSocketåº”ç”¨è¿è¡Œæ­£å¸¸';
                    statusEl.className = 'status success';
                } else {
                    statusEl.textContent = 'âŒ ProSocketåº”ç”¨æœªå“åº”';
                    statusEl.className = 'status info';
                }
            })
            .catch(error => {
                statusEl.textContent = 'âŒ ProSocketåº”ç”¨æœªå¯åŠ¨ï¼Œè¯·è¿è¡Œ npm run serve';
                statusEl.className = 'status info';
            });
    }

    // é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨æ£€æŸ¥çŠ¶æ€
    window.onload = checkStatus;
</script>
</body>

</html>